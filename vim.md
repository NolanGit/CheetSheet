# vim

## 模式

vim有三种模式：一般命令模式、编辑模式、命令行模式

### 一般命令模式：

- 进入方式：进入vim即为此模式

- 方向操作：hjkl左上下右，nG跳行，n→调列，0本行第一个字符，$本行最后一个字符，gg文件首行，G文件尾行

- 文本操作：dd删除(剪切)本行，ndd删除(剪切)本行及以下n行，x向前删除一个字符，X向后删除一个字符，d0删除(剪切)光标到本行第一个字符之间的文字，d$删除(剪切)光标到本行最后一个字符之间的文字，yy复制行，y0复制光标到本行第一个字符之间的文字，y$复制光标到本行最后一个字符之间的文字，nyy复制本行及以下n行，p在本行下一行粘贴，P在本行上一行粘贴，v选择模式，ctrl+v矩阵选择模式，V列选择模式

- 其他操作：u撤销，ctrl+r重做

### 编辑模式：

- 进入方式：在一般命令模式下，i从光标位置插入，I从当前行的第一个非空格字符前插入，o从下一行插入，O从上一行插入，a从光标的下一个字符开始插入，A从光标所在行尾开始插入，r替换光标所在位置的字符一次，R一直替换文字直到按下Esc

### 命令行模式：

- 进入方式：一般由:触发，ZZ(如文件修改则保存退出，如未修改则直接退出)除外

- 常用命令：:q退出，:wq保存退出，:q!不保存退出，:wq!强制保存退出，:w保存不退出，:n1,n2s/word/word2/g替换所有在n1n2行之间的word为word2，:n1,n2s/word/word2/gc替换所有在n1n2行之间的word为word2(依次询问是否替换)，/word向后搜索word，?word向前搜索word，搜索模式下n下一个查询结果，搜索模式下N上一个查询结果

## 编辑多个文件

- 单一窗口：vim /tmp/doc1 /tmp/doc2，使用:n切换到下一个文件，使用:N切换上一个文件，:files查看当前打开的所有文件

- 分屏展示：在打开doc1的情况下，使用:sp /tmp/doc2分屏打开doc2，按下ctrl+w后松开，然后点击"↑"或"↓"来切换窗口，或者ctrl+ww依次切换

## 其他常用

- 自动补全：常用ctrl+x+n补全

- 打开行号：:set nu；关闭行号：set nonu

